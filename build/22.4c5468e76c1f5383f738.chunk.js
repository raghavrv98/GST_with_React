(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"11c91d7b02563f0d84d7":function(e,a,t){"use strict";t.r(a);var l=t("8af190b70a6bc55c6f1b"),s=t.n(l),o=(t("8a2d1b95e05b6a321e74"),t("d7dd51e1bf6bfc2c9c3d")),i=t("0d7f0986bcd2f33d8a2a"),c=t("ab039aecd4a1d4fedc0e"),n=t("a28fc3c963a1d4d1a2e5"),r=t("ab4cb61bcb2dc161defb"),d=t("adc20f99e57c573c589c"),m=t("d95b0cf107403b178365"),u=t("54f683fcda7806277002"),v="app/User/DEFAULT_ACTION",b=Object(u.fromJS)({});var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;switch((arguments.length>1?arguments[1]:void 0).type){case v:default:return e}},g=function(e){return e.get("user",b)},f=function(){return Object(n.a)(g,function(e){return e.toJS()})},h=regeneratorRuntime.mark(N);function N(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},h,this)}Object(c.defineMessages)({header:{id:"".concat("app.containers.User",".header"),defaultMessage:"This is the User container!"}});var y,w=t("bd183afcc37eabd79225"),x=t.n(w),B=t("4cad7676f6ad23a52c95"),C=t("868115dbc0cccbfa5202"),I=t("b13fad99b312e52ff2bb"),S=t("7e06b3d41be6bf0b9866");function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,a,t,l){y||(y="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var s=e&&e.defaultProps,o=arguments.length-3;if(a||0===o||(a={children:void 0}),a&&s)for(var i in s)void 0===a[i]&&(a[i]=s[i]);else a||(a=s||{});if(1===o)a.children=l;else if(o>1){for(var c=new Array(o),n=0;n<o;n++)c[n]=arguments[n+3];a.children=c}return{$$typeof:y,type:e,key:void 0===t?null:""+t,ref:null,props:a,_owner:null}}function k(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function T(e,a){for(var t=0;t<a.length;t++){var l=a[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,a){return(j=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,"User",function(){return ne});var M=D(i.Helmet,{},void 0,D("title",{},void 0,"User"),D("meta",{name:"description",content:"Description of User"})),U=D("div",{className:"lds-facebook"},void 0,D("div",{}),D("div",{}),D("div",{}),D("span",{className:"loading-text-r"},void 0,"Loading... ")),L=D("div",{},void 0,D("ul",{className:"breadCrumb-bg-r"},void 0,D("li",{className:"breadCrumb-li-r"},void 0,D("i",{className:"fa fa-home","aria-hidden":"true"}),D("span",{className:"breadcrumb-text-r"},void 0,"Home")))),Y=D("option",{value:""},void 0,"Select Year"),_=D("option",{value:"2020"},void 0,"2020-2021"),J=D("option",{value:"2019"},void 0,"2019-2020"),P=D("option",{value:"2018"},void 0,"2018-2019"),R=D("option",{value:"2017"},void 0,"2017-2018"),E=D("option",{value:""},void 0,"Select Month"),q=D("option",{value:"4"},void 0,"April"),$=D("option",{value:"5"},void 0,"May"),W=D("option",{value:"6"},void 0,"June"),z=D("option",{value:"7"},void 0,"July"),G=D("option",{value:"8"},void 0,"August"),K=D("option",{value:"9"},void 0,"September"),Q=D("option",{value:"10"},void 0,"October"),V=D("option",{value:"11"},void 0,"November"),X=D("option",{value:"12"},void 0,"December"),Z=D("option",{value:"1"},void 0,"January"),ee=D("option",{value:"2"},void 0,"February"),ae=D("option",{value:"3"},void 0,"March"),te=D("br",{}),le=D("br",{}),se=D("br",{}),oe=D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 margin-15-r"},void 0,D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("div",{},void 0,D("button",{type:"button",className:"button-base-r"},void 0,D("label",{className:"cursor-pointer-r margin-0-r",htmlFor:"purchaseBill"},void 0,"Browse")))),D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("button",{className:"button-base-r"},void 0," Upload "))),ie=D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 margin-15-r"},void 0,D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("div",{},void 0,D("button",{type:"button",className:"button-base-r"},void 0,D("label",{className:"cursor-pointer-r margin-0-r",htmlFor:"saleBill"},void 0,"Browse")))),D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("button",{className:"button-base-r"},void 0," Upload "))),ce=D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 margin-15-r"},void 0,D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("div",{},void 0,D("button",{type:"button",className:"button-base-r"},void 0,D("label",{className:"cursor-pointer-r margin-0-r",htmlFor:"otherBill"},void 0,"Browse")))),D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("button",{className:"button-base-r"},void 0," Upload "))),ne=function(e){function a(){var e,t,l,s;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return l=this,s=(e=A(a)).call.apply(e,[this].concat(i)),t=!s||"object"!==O(s)&&"function"!==typeof s?H(l):s,F(H(H(t)),"state",{tabActive:!0,isActiveTab:"purchase",deleteId:"",deleteName:"",showHideClassName:"modal display-none container",getbill:{},isLoading:!0,year:"2020",month:"4",billType:"purchase",browseBillImages:[],isOpenClassName:"modal display-none container",billImages:[],isDeleteIcon:!1,isDeletedBill:[]}),F(H(H(t)),"getbill",function(e,a,l){x.a.get("https://gst-service-uat.herokuapp.com/bill/".concat(e,"/").concat(a,"/").concat(l)).then(function(e){var a=e.data.data;t.setState({getbill:a,isLoading:!1,isDeletedBill:[]});var l=JSON.parse(JSON.stringify(a));l.purchaseBills&&l.purchaseBills.map(function(e,a){Date.now()-e.timestamp>36e5&&t.deleteIcon("purchase",a)}),l.saleBills&&l.saleBills.map(function(e,a){Date.now()-e.timestamp>36e5&&t.deleteIcon("sale",a)}),l.otherBills&&l.otherBills.map(function(e,a){Date.now()-e.timestamp>36e5&&t.deleteIcon("other",a)})}).catch(function(e){var a=Object(S.a)(e);t.setState({message:a,isOpenClassName:"modal display-block container",type:"failure",isLoading:!1})},function(){return setTimeout(t.modalTime,1500)})}),F(H(H(t)),"deleteBills",function(e,a,l){x.a.delete("https://gst-service-uat.herokuapp.com/bill/".concat(e,"/").concat(a,"/").concat(l)).then(function(e){e.data.data;t.setState({message:e.data.message,type:"success",isOpenClassName:"modal display-block container",isLoading:!1},function(){return t.getbill(localStorage.getItem("userId"),t.state.month,t.state.year)},setTimeout(t.modalTime,1500))}).catch(function(e){var a=Object(S.a)(e);t.setState({message:a,isOpenClassName:"modal display-block container",type:"failure",isLoading:!1})},function(){return setTimeout(t.modalTime,1500)})}),F(H(H(t)),"putbill",function(e,a){x.a.put("https://gst-service-uat.herokuapp.com/bill/".concat(e),a).then(function(e){e.data.data;t.setState({message:e.data.message,isLoading:!1,type:"success",isOpenClassName:"modal display-block container"},function(){return t.getbill(localStorage.getItem("userId"),t.state.month,t.state.year)},setTimeout(t.modalTime,1500))}).catch(function(e){var a=Object(S.a)(e);t.setState({message:a,isOpenClassName:"modal display-block container",type:"failure",isLoading:!1})},function(){return setTimeout(t.modalTime,1500)})}),F(H(H(t)),"deleteIcon",function(e,a){var l=t.state.isDeletedBill,s="true"+a+e;l.push(s),l=k(new Set(l)),t.setState({isDeletedBill:l})}),F(H(H(t)),"modalTime",function(){t.setState({isOpenClassName:"modal display-none container"})}),F(H(H(t)),"loadFile",function(e){for(var a=[],l=[],s=0;s<e.target.files.length;s++)l.push(e.target.files[s]),a.push(URL.createObjectURL(e.target.files[s]));t.setState({browseBillImages:a,billImages:l})}),F(H(H(t)),"tabActive",function(e){var a=e.target.id;t.setState({isActiveTab:a,browseBillImages:[]})}),F(H(H(t)),"confirmModalHandler",function(e){var a=e.target.id,l=e.target.name;t.setState({showHideClassName:"modal display-block container",deleteId:a,deleteName:l})}),F(H(H(t)),"modalCloseHandler",function(){t.setState({showHideClassName:"modal display-none container",isOpenClassName:"modal display-none container",deleteId:"",deleteName:""})}),F(H(H(t)),"confirmDeleteData",function(){event.preventDefault();var e=event.target.id,a=JSON.parse(JSON.stringify(t.state.browseBillImages));a.splice(e,1);var l=t.state.billImages;l.splice(e,1),t.setState({showHideClassName:"modal display-none container",browseBillImages:a,billImages:l})}),F(H(H(t)),"confirmDeleteBill",function(e,a){event.preventDefault(),t.deleteBills(localStorage.getItem("userId"),e,a),t.setState({showHideClassName:"modal display-none container",isLoading:!0})}),F(H(H(t)),"billUploadHandler",function(e){e.preventDefault();var a=t.state.billImages,l=new FormData;l.append("year",t.state.year),l.append("month",t.state.month),l.append("billType",t.state.isActiveTab);for(var s=0;s<a.length;s++)l.append("bill",a[s]);t.putbill(localStorage.getItem("userId"),l),t.setState({browseBillImages:[],isLoading:!0})}),F(H(H(t)),"nameChangeHandler",function(e){var a=e.target.id,l=t.state.year,s=t.state.month,o=t.state.billType;"year"==a?l=e.target.value:"month"==a?s=e.target.value:o=e.target.value,t.setState({year:l,month:s,billType:o,isLoading:!0},function(){return t.getbill(localStorage.getItem("userId"),t.state.month,t.state.year)})}),t}var t,l,o;return function(e,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&j(e,a)}(a,s.a.Component),t=a,(l=[{key:"componentWillMount",value:function(){var e=this;this.getbill(localStorage.getItem("userId"),this.state.month,this.state.year),setInterval(function(){return e.getbill(localStorage.getItem("userId"),e.state.month,e.state.year)},36e5)}},{key:"render",value:function(){var e=this;return D("div",{},void 0,M,D(C.a,{showHideClassName:this.state.showHideClassName,onClose:this.modalCloseHandler,onConfirm:function(){return e.confirmDeleteBill(e.state.deleteId,e.state.deleteName)}}),D(I.a,{showHideClassName:this.state.isOpenClassName,modalType:this.state.type,message:this.state.message,onClose:this.modalCloseHandler}),this.state.isLoading?U:D("div",{className:"container outer-box-r"},void 0,L,D("div",{className:"container filter-year-month-r"},void 0,D("div",{className:"row"},void 0,D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-5 col-lg-5 col-xl-5"},void 0,D("select",{value:this.state.year,onChange:this.nameChangeHandler,className:"year-month-border-r",id:"year"},void 0,Y,_,J,P,R)),D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-5 col-lg-5 col-xl-5"},void 0,D("select",{value:this.state.month,onChange:this.nameChangeHandler,className:"year-month-border-r",id:"month"},void 0,E,q,$,W,z,G,K,Q,V,X,Z,ee,ae)),D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2"},void 0,D("div",{className:"text-align-center-r"},void 0,D("p",{className:"view-reports-r",onClick:function(){e.props.history.push("/manageUserReports/".concat(e.state.month,"/").concat(e.state.year))}},void 0,"view Reports"))))),D("div",{className:"container tab-space-r"},void 0,D("div",{className:"col-xs-12 col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4"},void 0,D("div",{className:"purchase"==this.state.isActiveTab?"tab-active-base-r":"tab-inactive-base-r"},void 0,D("p",{className:"margin-0-r",id:"purchase",onClick:this.tabActive},void 0,"Purchase Bills",te,"(",this.state.getbill.purchaseBills&&this.state.getbill.purchaseBills.length," entries)"))),D("div",{className:"col-xs-12 col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4"},void 0,D("div",{className:"sale"==this.state.isActiveTab?"tab-active-base-r":"tab-inactive-base-r"},void 0,D("p",F({className:"margin-0-r",id:"sale",onClick:this.tabActive},"className",""),void 0,"Sale Bills",le,"(",this.state.getbill.saleBills&&this.state.getbill.saleBills.length," entries)"))),D("div",{className:"col-xs-12 col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4"},void 0,D("div",{className:"other"==this.state.isActiveTab?"tab-active-base-r":"tab-inactive-base-r"},void 0,D("p",F({className:"margin-0-r",id:"other",onClick:this.tabActive},"className",""),void 0,"Other",se,"(",this.state.getbill.otherBills&&this.state.getbill.otherBills.length," entries)")))),"purchase"==this.state.isActiveTab?D("div",{className:"container"},void 0,D("form",{onSubmit:this.billUploadHandler},void 0,D("div",{className:"col-xs-12 col-12 col-sm-4 col-md-3 col-lg-2 col-xl-2 text-align-center-r"},void 0,D("div",{className:"card-scroll-r"},void 0,1==this.state.browseBillImages.length?D(s.a.Fragment,{},void 0,D("div",{className:"card-browse-one-r"},void 0,D("img",{className:"browse-one-image-r",src:this.state.browseBillImages[0]})),D("span",{className:"delete-one-browse-icon"},void 0,D("button",{id:0,onClick:this.confirmDeleteData,className:"fa fa-times-circle"}))):this.state.browseBillImages.length>1?D(s.a.Fragment,{},void 0,this.state.browseBillImages.map(function(a,t){return D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-align-center-r padding-5-r"},t,D("div",{className:"card-browse-r"},void 0,D("img",{className:"browse-image-r",src:a})),D("span",{className:"delete-one-browse-icon"},void 0,D("button",{id:t,onClick:e.confirmDeleteData,className:"fa fa-times-circle"})))})):null),D("input",{className:"display-none-r",accept:"image/*",onChange:this.loadFile,id:"purchaseBill",type:"file",multiple:!0,required:!0}),oe)),D("div",{className:"col-xs-12 col-12 col-sm-8 col-md-9 col-lg-10 col-xl-10"},void 0,D("div",{className:"text-align-center-min-r"},void 0,this.state.getbill.purchaseBills&&this.state.getbill.purchaseBills.map(function(a,t){return D(s.a.Fragment,{},t,D("div",{className:"card-selected-image-r"},void 0,D("img",{className:"selected-image-r",src:"https://gst-service-uat.herokuapp.com/bills/"+a.img}),D("p",{className:"card-selected-heading-r"},void 0,a.originalName),D("p",{className:"card-selected-sub-heading-r"},void 0,"Created At : ",Object(B.a)(a.timestamp).format("DD MMM YYYY"))),e.state.isDeletedBill.includes("true"+t+"purchase")?null:D("span",{className:"delete-bill-icon-r"},void 0,D("button",{name:"purchase",id:a._id,onClick:e.confirmModalHandler,className:"fa fa-times-circle"})))})))):"sale"==this.state.isActiveTab?D("div",{className:"container"},void 0,D("form",{onSubmit:this.billUploadHandler},void 0,D("div",{className:"col-xs-12 col-12 col-sm-4 col-md-3 col-lg-2 col-xl-2 text-align-center-r"},void 0,D("div",{className:"card-scroll-r"},void 0,1==this.state.browseBillImages.length?D(s.a.Fragment,{},void 0,D("div",{className:"card-browse-one-r"},void 0,D("img",{className:"browse-one-image-r",src:this.state.browseBillImages[0]})),D("span",{className:"delete-one-browse-icon"},void 0,D("button",{id:0,onClick:this.confirmDeleteData,className:"fa fa-times-circle"}))):this.state.browseBillImages.length>1?D(s.a.Fragment,{},void 0,this.state.browseBillImages.map(function(a,t){return D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-align-center-r padding-5-r"},t,D("div",{className:"card-browse-r"},void 0,D("img",{className:"browse-image-r",src:a})),D("span",{className:"delete-one-browse-icon"},void 0,D("button",{id:t,onClick:e.confirmDeleteData,className:"fa fa-times-circle"})))})):null),D("input",{className:"display-none-r",accept:"image/*",onChange:this.loadFile,id:"saleBill",type:"file",multiple:!0,required:!0}),ie)),D("div",{className:"col-xs-12 col-12 col-sm-8 col-md-9 col-lg-10 col-xl-10"},void 0,D("div",{className:"text-align-center-min-r"},void 0,this.state.getbill.saleBills&&this.state.getbill.saleBills.map(function(a,t){return D(s.a.Fragment,{},t,D("div",{className:"card-selected-image-r"},void 0,D("img",{className:"selected-image-r",src:"https://gst-service-uat.herokuapp.com/bills/"+a.img}),D("p",{className:"card-selected-heading-r"},void 0,a.originalName),D("p",{className:"card-selected-sub-heading-r"},void 0,"Created At : ",Object(B.a)(a.timestamp).format("DD MMM YYYY"))),e.state.isDeletedBill.includes("true"+t+"sale")?null:D("span",{className:"delete-bill-icon-r"},void 0,D("button",{name:"sale",id:a._id,onClick:e.confirmModalHandler,className:"fa fa-times-circle"})))})))):D("div",{className:"container"},void 0,D("form",{onSubmit:this.billUploadHandler},void 0,D("div",{className:"col-xs-12 col-12 col-sm-4 col-md-3 col-lg-2 col-xl-2 text-align-center-r"},void 0,D("div",{className:"card-scroll-r"},void 0,1==this.state.browseBillImages.length?D(s.a.Fragment,{},void 0,D("div",{className:"card-browse-one-r"},void 0,D("img",{className:"browse-one-image-r",src:this.state.browseBillImages[0]})),D("span",{className:"delete-one-browse-icon"},void 0,D("button",{id:0,onClick:this.confirmDeleteData,className:"fa fa-times-circle"}))):this.state.browseBillImages.length>1?D(s.a.Fragment,{},void 0,this.state.browseBillImages.map(function(a,t){return D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 text-align-center-r padding-5-r"},t,D("div",{className:"card-browse-r"},void 0,D("img",{className:"browse-image-r",src:a})),D("span",{className:"delete-one-browse-icon"},void 0,D("button",{id:t,onClick:e.confirmDeleteData,className:"fa fa-times-circle"})))})):null),D("input",{className:"display-none-r",accept:"image/*",onChange:this.loadFile,id:"otherBill",type:"file",multiple:!0,required:!0}),ce)),D("div",{className:"col-xs-12 col-12 col-sm-8 col-md-9 col-lg-10 col-xl-10"},void 0,D("div",{className:"text-align-center-min-r"},void 0,this.state.getbill.otherBills&&this.state.getbill.otherBills.map(function(a,t){return D(s.a.Fragment,{},t,D("div",{className:"card-selected-image-r"},void 0,D("img",{className:"selected-image-r",src:"https://gst-service-uat.herokuapp.com/bills/"+a.img}),D("p",{className:"card-selected-heading-r"},void 0,a.originalName),D("p",{className:"card-selected-sub-heading-r"},void 0,"Created At : ",Object(B.a)(a.timestamp).format("DD MMM YYYY"))),e.state.isDeletedBill.includes("true"+t+"other")?null:D("span",{className:"delete-bill-icon-r"},void 0,D("button",{name:"other",id:a._id,onClick:e.confirmModalHandler,className:"fa fa-times-circle"})))}))))))}}])&&T(t.prototype,l),o&&T(t,o),a}(),re=Object(n.b)({user:f()});var de=Object(o.connect)(re,function(e){return{dispatch:e}}),me=Object(m.a)({key:"user",reducer:p}),ue=Object(d.a)({key:"user",saga:N});a.default=Object(r.compose)(me,ue,de)(ne)}}]);