(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"582326495b93c113b960":function(e,t,a){"use strict";a.r(t);var o=a("8af190b70a6bc55c6f1b"),s=a.n(o),r=(a("8a2d1b95e05b6a321e74"),a("d7dd51e1bf6bfc2c9c3d")),i=a("0d7f0986bcd2f33d8a2a"),n=a("ab039aecd4a1d4fedc0e"),l=a("a28fc3c963a1d4d1a2e5"),c=a("ab4cb61bcb2dc161defb"),d=a("adc20f99e57c573c589c"),m=a("d95b0cf107403b178365"),u=a("54f683fcda7806277002"),p="app/UserDetails/DEFAULT_ACTION",v=Object(u.fromJS)({});var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;switch((arguments.length>1?arguments[1]:void 0).type){case p:default:return e}},f=function(e){return e.get("userDetails",v)},b=function(){return Object(l.a)(f,function(e){return e.toJS()})},y=regeneratorRuntime.mark(g);function g(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},y,this)}a("4cad7676f6ad23a52c95"),Object(n.defineMessages)({header:{id:"".concat("app.containers.UserDetails",".header"),defaultMessage:"This is the UserDetails container!"}});var N,w=a("bd183afcc37eabd79225"),C=a.n(w),S=a("b13fad99b312e52ff2bb"),O=a("7e06b3d41be6bf0b9866");function x(e){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}function D(e,t,a,o){N||(N="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var s=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&s)for(var i in s)void 0===t[i]&&(t[i]=s[i]);else t||(t=s||{});if(1===r)t.children=o;else if(r>1){for(var n=new Array(r),l=0;l<r;l++)n[l]=arguments[l+3];t.children=n}return{$$typeof:N,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function T(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"UserDetails",function(){return le});var U=D(i.Helmet,{},void 0,D("title",{},void 0,"UserDetails"),D("meta",{name:"description",content:"Description of UserDetails"})),F=D("span",{className:"text-color-white-r"},void 0,"Upload Report"),P=D("i",{className:"fa fa-times","aria-hidden":"true"}),A=D("div",{className:"text-align-center-r"},void 0,D("button",{className:"button-base-r width-40-r"},void 0,"Upload")),L=D("div",{className:"lds-facebook"},void 0,D("div",{}),D("div",{}),D("div",{}),D("span",{className:"loading-text-r"},void 0,"Loading... ")),_=D("i",{className:"fa fa-home","aria-hidden":"true"}),J=D("span",{className:"breadcrumb-text-r"},void 0,"Home"),M=D("li",{className:"breadCrumb-li-child-r"},void 0,D("i",{className:"fa fa-files-o","aria-hidden":"true"}),D("span",{className:"breadcrumb-text-r"},void 0,"User Details")),E=D("option",{disabled:!0,value:"0"},void 0,"Select Year"),I=D("option",{value:"2020"},void 0,"2020-2021"),q=D("option",{value:"2019"},void 0,"2019-2020"),G=D("option",{value:"2018"},void 0,"2018-2019"),$=D("option",{value:"2017"},void 0,"2017-2018"),z=D("option",{disabled:!0,value:""},void 0,"Select Month"),V=D("option",{value:"4"},void 0,"April"),W=D("option",{value:"5"},void 0,"May"),Y=D("option",{value:"6"},void 0,"June"),K=D("option",{value:"7"},void 0,"July"),Q=D("option",{value:"8"},void 0,"August"),X=D("option",{value:"9"},void 0,"September"),Z=D("option",{value:"10"},void 0,"October"),ee=D("option",{value:"11"},void 0,"November"),te=D("option",{value:"12"},void 0,"December"),ae=D("option",{value:"1"},void 0,"January"),oe=D("option",{value:"2"},void 0,"February"),se=D("option",{value:"3"},void 0,"March"),re=D("div",{},void 0,D("button",{type:"button",className:"button-base-r"},void 0,D("label",{className:"cursor-pointer-r margin-0-r font-11-r",htmlFor:"gst"},void 0,"Upload GST Report"))),ie=D("i",{className:"fas fa-angle-left"}),ne=D("i",{className:"fas fa-angle-right"}),le=function(e){function t(){var e,a,o,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return o=this,s=(e=R(t)).call.apply(e,[this].concat(i)),a=!s||"object"!==x(s)&&"function"!==typeof s?j(o):s,H(j(j(a)),"state",{payload:{oldPassword:"",newPassword:""},isOpenClassName:"modal display-none container",isFetching:!0,showHideClassName:"modal display-none container",comment:"",browseReport:[],report:[],month:a.props.match.params.month,year:a.props.match.params.year,userBillSummary:{},reactTableData:[],isLoading:!0}),H(j(j(a)),"getUserBillSummary",function(e,t,o){var s=window.API_URL+"/userBillSummary/".concat(e,"/").concat(t,"/").concat(o);C.a.get(s).then(function(e){var t=e.data.data,o=Object.entries(t.summary[0]).map(function(e){if(e)return e[0]=a.replaceAll(e[0],"/","-"),{date:e[0],purchaseBills:e[1].purchaseBills,saleBills:e[1].saleBills,otherBills:e[1].otherBills}});o=void 0==o[0]?[]:o,a.setState({userBillSummary:t,reactTableData:o,isFetching:!1,isLoading:!1})}).catch(function(e){var t=Object(O.b)(e);a.setState({message:t,isOpenClassName:"modal display-block container",type:"failure",isFetching:!1,isLoading:!1})})}),H(j(j(a)),"postReport",function(e,t){if("daily"===a.state.reportType){var o=window.API_URL+"/dailyReport/".concat(e,"/").concat(a.state.month,"/").concat(a.state.year,"/").concat(a.state.date);C.a.post(o,t).then(function(e){e.data.data;a.setState({message:e.data.message,type:"success",isOpenClassName:"modal display-block container",reportType:"",comment:""},function(){return setTimeout(a.modalTime,1500)})}).catch(function(e){var t=Object(O.b)(e);a.setState({message:t,isOpenClassName:"modal display-block container",type:"failure",isFetching:!1,isLoading:!1},function(){return setTimeout(a.modalTime,1500)})})}else{var s=window.API_URL+"/gstReport/".concat(e,"/").concat(a.state.month,"/").concat(a.state.year);C.a.post(s,t).then(function(e){e.data.data;a.setState({message:e.data.message,isFetching:!1,type:"success",isOpenClassName:"modal display-block container",reportType:"",comment:""},function(){return setTimeout(a.modalTime,1500)})}).catch(function(e){var t=Object(O.b)(e);a.setState({message:t,isOpenClassName:"modal display-block container",type:"failure",isFetching:!1,isLoading:!1},function(){return setTimeout(a.modalTime,1500)})})}}),H(j(j(a)),"modalTime",function(){a.setState({isOpenClassName:"modal display-none container",isFetching:!1})}),H(j(j(a)),"modalCloseHandler",function(){a.setState({isResetModal:!1,showHideClassName:"modal display-none container",comment:""})}),H(j(j(a)),"loadFile",function(e,t){for(var o=[],s=[],r=e.target.id,i=0;i<e.target.files.length;i++)s.push(e.target.files[i]),o.push(URL.createObjectURL(e.target.files[i]));a.setState({browseReport:o,report:s,showHideClassName:"modal display-block container",reportType:r,date:t})}),H(j(j(a)),"reportUploadHandler",function(e){e.preventDefault();var t=new FormData;t.append("comment",a.state.comment),t.append("report",a.state.report[0]),a.setState({browseReport:[],report:[],showHideClassName:"modal display-none container"},function(){return a.postReport(a.props.match.params.id,t)})}),H(j(j(a)),"nameChangeHandler",function(e){var t=e.target.id,o=a.props.match.params.year,s=a.props.match.params.month,r=a.props.match.params.id;"year"===t?o=e.target.value:"month"===t&&(s=e.target.value),a.setState({year:o,month:s,isFetching:!0},function(){return a.getUserBillSummary(r,a.state.month,a.state.year)})}),H(j(j(a)),"commentChangeHandler",function(e){var t=a.state.comment;t=e.target.value,a.setState({comment:t})}),a}var a,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,s.a.Component),a=t,(o=[{key:"componentWillMount",value:function(){var e=this.props.match.params.id;this.getUserBillSummary(e,this.props.match.params.month,this.props.match.params.year)}},{key:"replaceAll",value:function(e,t,a){return e.split(t).join(a)}},{key:"render",value:function(){var e,t=this,a=[{Header:"Created At",accessor:"date",sortable:!1},{Header:"Purchase Bills",accessor:"purchaseBills",sortable:!1,Cell:function(e){return D("span",{className:"view-reports-r",onClick:function(){return t.props.history.push("/userDetails/".concat(t.props.match.params.id,"/userBillDetails/purchase/").concat(t.state.month,"/").concat(t.state.year,"/").concat(e.original.date))}},void 0,e.original.purchaseBills.complete+"/"+e.original.purchaseBills.total)}},{Header:"Sale Bills",accessor:"saleBills",sortable:!1,Cell:function(e){return D("span",{className:"view-reports-r",onClick:function(){return t.props.history.push("/userDetails/".concat(t.props.match.params.id,"/userBillDetails/sale/").concat(t.state.month,"/").concat(t.state.year,"/").concat(e.original.date))}},void 0,e.original.saleBills.complete+"/"+e.original.saleBills.total)}},{Header:"Other",accessor:"other",sortable:!1,Cell:function(e){return D("span",{className:"view-reports-r",onClick:function(){return t.props.history.push("/userDetails/".concat(t.props.match.params.id,"/userBillDetails/other/").concat(t.state.month,"/").concat(t.state.year,"/").concat(e.original.date))}},void 0,e.original.otherBills.complete+"/"+e.original.otherBills.total)}},{Header:"Daily Reports",sortable:!1,Cell:function(e){return D("div",{},void 0,D("p",{className:"view-reports-r",onClick:function(){t.props.history.push("/userDetails/".concat(t.props.match.params.id,"/manageAccountantReports/daily/").concat(t.state.month,"/").concat(t.state.year,"/").concat(e.original.date))}},void 0,"View"))}},{Header:"Upload Summary",sortable:!1,Cell:function(e){return D("div",{},void 0,D("input",{onChange:function(){return t.loadFile(event,e.original.date)},id:"daily",type:"file",className:"button-base-r width-80-r",required:!0}))}}];return D("div",{},void 0,U,D(S.a,{showHideClassName:this.state.isOpenClassName,modalType:this.state.type,message:this.state.message,onClose:this.modalCloseHandler}),D("div",{className:this.state.showHideClassName},void 0,D("div",{className:"modal-dialog modal-dialog-centered",role:"document"},void 0,D("div",{className:"modal-content"},void 0,D("div",{className:"modal-header background-color-r"},void 0,F,D("button",{type:"button",className:"close",onClick:this.modalCloseHandler,"aria-label":"Close"},void 0,P)),D("div",{className:"modal-body,input-group input-group-lg"},void 0,D("div",{className:"margin-20-r"},void 0,D("form",{onSubmit:this.reportUploadHandler},void 0,D("div",{},void 0,D("img",{src:this.state.browseReport.length>0?this.state.browseReport[0]:"",className:"upload-modal-r"}),D("textarea",(H(e={rows:"2",id:"comment",placeholder:"comments if any ..",onChange:this.commentChangeHandler,value:this.state.comment,className:"form-control reset-input-box-r"},"placeholder","comments.."),H(e,"required",!0),e))),A)))))),this.state.isLoading?L:D("div",{className:"container outer-box-r"},void 0,D("div",{},void 0,D("ul",{className:"breadCrumb-bg-r"},void 0,D("li",{onClick:function(){return t.props.history.push("/manageUser")},className:"breadCrumb-li-child-1-r"},void 0,_,J),M)),D("div",{className:"container margin-10-r"},void 0,D("div",{className:"row"},void 0,D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"},void 0,D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 "},void 0,D("p",{className:"main-title-r"},void 0,this.state.userBillSummary&&this.state.userBillSummary.legalName+" Details")),D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 "},void 0,D("p",{className:"sub-title-r"},void 0,"(",this.state.userBillSummary&&this.state.userBillSummary.mobileNumber,")"))))),D("div",{className:"container filter-year-month-r"},void 0,D("div",{className:"row"},void 0,D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8"},void 0,D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("select",{id:"year",value:this.state.year,onChange:this.nameChangeHandler,className:"year-month-border-r",name:"lectureId"},void 0,E,I,q,G,$)),D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("select",{id:"month",value:this.state.month,onChange:this.nameChangeHandler,className:"year-month-border-r",name:"lectureId"},void 0,z,V,W,Y,K,Q,X,Z,ee,te,ae,oe,se))),D("div",{className:"col-xs-12 col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 button-margin-top"},void 0,D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("button",{type:"button",onClick:function(){t.props.history.push("/userDetails/".concat(t.props.match.params.id,"/manageAccountantReports/gst/").concat(t.state.month,"/").concat(t.state.year))},className:"button-base-r"},void 0,"view GST Reports")),D("div",{className:"col-xs-6 col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6"},void 0,D("input",{style:{display:"none"},onChange:this.loadFile,id:"gst",type:"file",required:!0}),re)))),D("div",{className:"container"},void 0,D("div",{className:"customReactTableBox"},void 0,D(ReactTable,{className:"customReactTable",data:this.state.reactTableData,columns:a,defaultPageSize:5,noDataText:this.state.isFetching?"":"There is no data to display.",loading:this.state.isFetching,loadingText:"Loading ...",PreviousComponent:function(e){return s.a.createElement("button",B({type:"button"},e),ie)},NextComponent:function(e){return s.a.createElement("button",B({type:"button"},e),ne)}})))))}}])&&T(a.prototype,o),r&&T(a,r),t}(),ce=Object(l.b)({userDetails:b()});var de=Object(r.connect)(ce,function(e){return{dispatch:e}}),me=Object(m.a)({key:"userDetails",reducer:h}),ue=Object(d.a)({key:"userDetails",saga:g});t.default=Object(c.compose)(me,ue,de)(le)}}]);